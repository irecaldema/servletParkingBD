<!DOCTYPE html>

<html>
<head>
<title>Gestión del Parking</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<h1 align="center"> Gestión del parking </h1>

<div align="center">
	<!--boton mostrar vehiculos-->
	<fieldset>
			<legend> Mostrar Vehículos </legend>
	<form id="mostrar" method="post" action="GestorBD" style="text-align: center">
		<input name="gestion" hidden="true" type="text" value="mostrar_vehiculos"/>
		<input type="submit" id="submit" value="Mostrar vehículos";>
	</form>
	</fieldset>
<br/>

	<!--boton busqueda por matricula-->
	<fieldset>
		<legend> Buscar Vehículos </legend>
	<div class="divspoiler">
		<input type="button" value="Búsqueda por matrícula" onclick="
			if (this.parentNode.nextSibling.childNodes[0].style.display != '') { 
				this.parentNode.nextSibling.childNodes[0].style.display = ''; 
				this.value = 'Ocultar búsqueda'; 
			} else { 
				this.parentNode.nextSibling.childNodes[0].style.display = 'none'; 
				this.value = 'Búsqueda por matrícula'; 
			}
		">
	</div><div><div class="spoiler" style="display: none;">
		<form name="buscar_matricula" method="post" onsubmit="return validacion_busqueda_matricula()" action="GestorBD"> 
			<input name="gestion" hidden="true" type="text"  value="buscar_matricula"/> <br>
			<label> Búsqueda por matrícula: </label>
			<input name="matricula" type="text" placeholder="4 numeros 3 letras"> </input>
			<input type="submit" id="submit" value="Buscar">
		</form>
	</div></div>
	</fieldset>
	<!--boton cerrado-->
	<br/>

	<!--boton modificar vehiculo estacionado-->
	<fieldset>
		<legend> Modificar Vehículos </legend>
	<div class="divspoiler">
		<input type="button" value="Modificar coche" onclick="
			if (this.parentNode.nextSibling.childNodes[0].style.display != '') { 
				this.parentNode.nextSibling.childNodes[0].style.display = ''; 
				this.value = 'Ocultar modificar coche'; 
			} else { 
				this.parentNode.nextSibling.childNodes[0].style.display = 'none'; 
				this.value = 'Modificar coche'; 
			}
		">
	</div><div><div class="spoiler" style="display: none;">
		<form name="modificar_vehiculo" method="post" onsubmit="return validacion_modificar_vehiculo()" action="GestorBD"> 
			<input name="gestion" hidden="true" type="text" value="modificar_vehiculo"/> <br>
			<label> Matrícula del vehículo a modificar: </label>
				<input name="matriculavieja" type="text" placeholder="4 numeros 3 letras" /> <br>
			<label> Nueva matrícula:  </label>
				<input name="matriculanueva" type="text" id="matricula" placeholder="4 numeros 3 letras" /> <br>
			<label> Marca: </label>
				<input name="marca" type="text" id="marca" /> <br>
			<label> Número de ruedas: </label>
				<input name="numruedas" type="text" id="numruedas" /> <br>
			<label> ¿Tiene motor?  </label>
				<input name="motor" type="radio" value="true" /> Sí
				<input name="motor" type="radio" value="false" /> No <br>
			<label> ¿Es automático? </label>
				<input name="automatico" type="radio" value="true" /> Sí
				<input name="automatico" type="radio"value="false" /> No <br>
			<label> Consumo en 100km </label>
				<input name="consumo" type="text" id="consumo100km" /> <br>
			<input type="submit" id="submit" value="Modificar">
		</form>
		<!--<input type="button" value="Coche" onClick=" window.location.href='mod_coche.html' ">-->
		<!--<input type="button" value="Moto" onClick=" window.location.href='mod_moto.html' ">-->
	</div></div>
	</fieldset>
	<!--boton cerrado-->
	<br/>

	<!--boton anadir vehiculo estacionado-->
	<fieldset>
		<legend> Añadir Vehículos </legend>
	<div class="divspoiler">
		<input type="button" value="Añadir coche" onclick="
			if (this.parentNode.nextSibling.childNodes[0].style.display != '') { 
				this.parentNode.nextSibling.childNodes[0].style.display = ''; 
				this.value = 'Ocultar añadir coche'; 
			} else { 
				this.parentNode.nextSibling.childNodes[0].style.display = 'none'; 
				this.value = 'Añadir coche'; 
			}
		">
	</div><div><div class="spoiler" style="display: none;">
		<form name="anyadir_vehiculo" method="post" onsubmit="return validacion_anadir_vehiculo()" action="GestorBD"> 
			<input name="gestion" hidden="true" type="text"  value="anyadir_vehiculo"/>
			
			<!--<h4 style="text-align: center;"> Formulario de añadir coche </h4> <hr/>--> <br>
			<label> Matrícula: </label>
				<input name="matricula" type="text" placeholder="4 numeros 3 letras"> </input> <br>
			<label> Número de ruedas: </label>
				<input name="numruedas" type="text"  value="4"> </input> <br>
			<label> Vehículo a motor: </label>
				<input name="motor" type="radio"  value="true"> Sí
				<input name="motor" type="radio"  value="false"> No <br>
			<label> Marca del vehículo: </label>
				<input name="marca" type="text"  value="marca"> </input> <br>
			<label> Sistema de cambios automático: </label>
				<input name="automatico" type="radio"  value="true"> Sí
				<input name="automatico" type="radio"  value="false"> No <br>
			<label> Consumo a los 100km: </label>
				<input name="consumo" type="text"  placeholder="consumo100km"> </input> <br>
			<input type="submit" id="submit" value="Añadir">
		</form>
	</div></div>
	</fieldset>
	<!--boton cerrado-->
	<br/>

	<!--boton borrar vehiculo estacionado-->
	<fieldset>
		<legend> Borrar Vehículos </legend>
	<div class="divspoiler">
		<input type="button" value="Borrar vehículo estacionado" onclick="
			if (this.parentNode.nextSibling.childNodes[0].style.display != '') { 
				this.parentNode.nextSibling.childNodes[0].style.display = ''; 
				this.value = 'Ocultar borrar vehículo'; 
			} else { 
				this.parentNode.nextSibling.childNodes[0].style.display = 'none'; 
				this.value = 'Borrar vehículo estacionado'; 
			}
		">
	</div><div><div class="spoiler" style="display: none;">
		<form name="borrar_vehiculo" method="post" onsubmit="return validacion_borrar_vehiculo()" action="GestorBD"> 
			<input name="gestion" hidden="true" type="text"  value="borrar_vehiculo"/> <br>
			<label> Matrícula del vehículo a borrar: </label> 
				<input name="matricula" type="text"  placeholder="4 numeros 3 letras"> </input>
			<input type="submit" id="submit" value="Borrar">
		</form>
	</div></div>
	</fieldset>
	<!--boton cerrado-->
</div> <!-- align center -->

<br/>

<script type="text/javascript">
function validacion_busqueda_matricula() {
	console.log("Comprobación búsqueda matrícula");
	var x = document.forms["buscar_matricula"]["matricula"].value;
	if (validar_matricula(x)){ 
		//console.log("Final de validación, OK");
		return true;
	} else {
		console.log("Final de validación, Error");
		return false;
	};	
	
}
function validacion_modificar_vehiculo() {	
	var x = document.forms["modificar_vehiculo"]["matriculanueva"].value;
	var a = document.forms["modificar_vehiculo"]["matriculavieja"].value;
	if (validar_matricula(a) && validar_matricula(x)) {
		return true;
	} else {
		return false;
	};
}
function validacion_anadir_vehiculo() {
	var x = document.forms["anyadir_vehiculo"]["matricula"].value;
	if (validar_matricula(x)) {
		return true;
	} else {
		return false;
	};		
}
function validacion_borrar_vehiculo() {
	var x = document.forms["borrar_vehiculo"]["matricula"].value;
	if (validar_matricula(x)) {
		return true;
	} else {
		return false;
	};		
}
function validar_matricula(x) {
	if (x == null || x == "") {
		alert("Escribe la matrícula");
		console.log("Comprobación nula");
		return false;
	} else if(x.length!=7) {
		alert("No has introducido una matrícula válida (núm caracteres)");
		console.log("Error, número de caracteres matrícula");
		return false;
	} else {
		var expreg = /^[0-9]{4}[A-Z,a-z]{3}$/;
		if (expreg.test(x)) {
			//alert("La matrícula es correcta");
			//console.log("Correcto");
			return true;
		} else {
			//alert("La matrícula NO es correcta");
			//console.log("Error en formato matrícula");
			return false;
		}
	}
}
</script>

</body>
</html>